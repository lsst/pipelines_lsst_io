.. _release-v22-0-0-tickets:

###################################
Tickets Addressed in Release 22.0.0
###################################

- :jira:`DM-4875`: Give base an updated readme file [base]
- :jira:`DM-10351`:  Concise progress tracking for long-running jobs [ctrl_mpexec]
- :jira:`DM-11125`:  lsstDebug behaviour does not match documentation [base]
- :jira:`DM-12549`:  ap_pipe must call AssociationTask in a reproducible order [ap_verify, ctrl_mpexec]
- :jira:`DM-14875`:  What to add to the pipe_tasks readme [pipe_tasks]
- :jira:`DM-16857`:  Convert afw.detection to numpydoc [afw]
- :jira:`DM-17071`:  Remove afw.math.mathLib [afw, ip_diffim]
- :jira:`DM-17689`:  Expose maximum number of bits used by IdFactory [obs_base, pipe_tasks]
- :jira:`DM-18000`:  Implement PipelineTask and yaml file to convert DiaSources for SDM system inside ap_association [ap_association]
- :jira:`DM-19470`:  Create jointcal PipelineTask (version 0: tests) [jointcal, testdata_jointcal]
- :jira:`DM-19942`:  ForcedPhotCcdTask in PipelineTask mode needs to accept references from multiple patches [meas_base]
- :jira:`DM-20695`:  Coadd in Gen3 doesn't have a Selector like the one in Gen2 [obs_subaru, pipe_tasks]
- :jira:`DM-20703`:  Modernize pybind11 wrappers for afw.fits, afw.geom [afw, pipe_drivers]
- :jira:`DM-20749`:  Examine results of image differencing with inserted fakes [pipe_tasks]
- :jira:`DM-21916`:  SQuaSH upload of Gen 3 Measurements [verify]
- :jira:`DM-22277`:  Convert TransformObjectTableTask  and friends to Gen 3 [obs_cfht, obs_decam, obs_lsst, obs_subaru, pipe_tasks]
- :jira:`DM-23032`:  CreateSDM functor for bitpacking mutiple flag columns [ap_association]
- :jira:`DM-23156`:  Add ways to test a PipelineTask's init inputs/outputs [pipe_base]
- :jira:`DM-23159`:  Make PTC task compatible with RFC-352 [cp_pipe, daf_butler, ip_isr, obs_base]
- :jira:`DM-23862`:  Split data ID handling off from butlerTests.makeTestRepo [daf_butler]
- :jira:`DM-23985`:  Cannot do linearity corrections in Gen 3 DECam processing [daf_butler, ip_isr, obs_base, obs_decam, obs_decam_data]
- :jira:`DM-24024`:  Revisit region padding in HSC Gen3 ingest or visit definition [obs_subaru]
- :jira:`DM-24253`:  Generate stack produced calibration products for HiTS [astro_metadata_translator, obs_decam, pipe_tasks]
- :jira:`DM-24318`:  Add PipelineTask to fgcmcal [fgcmcal]
- :jira:`DM-24349`:  Write a Source.yaml for obs_lsst/imSim [obs_lsst, pipe_tasks]
- :jira:`DM-24638`:  Convert TransformSourceTableTask and friends to Gen3 [obs_cfht, obs_decam, obs_lsst, obs_subaru, pipe_tasks]
- :jira:`DM-25050`:  Fix non-normalized matching kernel case in the decorrelation afterburner [ip_diffim]
- :jira:`DM-25304`:  Create task to extract and preprocess bright stars [daf_butler, meas_algorithms, obs_base, obs_subaru, pipe_tasks]
- :jira:`DM-25807`:  refcat requireProperMotion=True config option bypassed for misconfigured catalog [jointcal, meas_algorithms, obs_test]
- :jira:`DM-25849`:  Update HSC to use jointcal refcat defaults [jointcal, obs_subaru]
- :jira:`DM-25894`:  Allow ProcessBrightStarsTask to extract stars on, or slightly beyond exposure edge [pipe_tasks]
- :jira:`DM-25965`:  Refactor gen3 raw ingest to support remote files [astro_metadata_translator, daf_base, daf_butler, obs_base, obs_cfht, obs_decam]
- :jira:`DM-26194`:  Remove meas_extensions_scarlet's deblend.py [meas_extensions_scarlet]
- :jira:`DM-26224`:  Deprecate defaultFilter in LoadReferenceObjectsConfig [meas_algorithms]
- :jira:`DM-26302`:  Avoid requiring long-lived per-Database-instance connections [ctrl_mpexec, daf_butler]
- :jira:`DM-26326`:  Remove obs dependency from ap_verify_testdata and ap_pipe_testdata [ap_pipe, ap_pipe_testdata, ap_verify, ap_verify_testdata]
- :jira:`DM-26372`:  Units wrong in deepDiff_diaSrc catalog [ip_diffim, pipe_tasks]
- :jira:`DM-26375`:  Allow databases other than SQLite when running ap_verify [ap_verify]
- :jira:`DM-26393`:  Write an Object.yaml and configs for obs_lsst/imsim [obs_lsst, obs_subaru, pipe_tasks]
- :jira:`DM-26484`:  Run read noise eotest task at NCSA [ip_isr]
- :jira:`DM-26590`:  Prohibit dimension query expressions that do not reference required dependencies [daf_butler]
- :jira:`DM-26592`:  Create “afterburner” to analyse the results of AP processing with fakes included [ap_association, ap_pipe, pipe_tasks]
- :jira:`DM-26593`:  Create an integrated pipeline for AP fake analysis [ap_pipe, ap_verify, pipe_tasks, verify_metrics]
- :jira:`DM-26688`:  Add command-line tool for Registry.associate [ctrl_mpexec, daf_butler]
- :jira:`DM-26689`:  Add command-line tool for Butler.pruneDatasets [daf_butler]
- :jira:`DM-26868`:  Remove obs_ctio0m9 from lsst_distrib [lsst_ci, lsst_obs]
- :jira:`DM-27008`:  Update Functor implementation to use gen3 butler/parquet access [daf_butler, pipe_tasks]
- :jira:`DM-27064`:  afw fails to build with pybind11 2.5 (and python 3.8) [afw]
- :jira:`DM-27086`:  Numpydoc conversion of meas_algorithms through gaussianPsfFactory.py [meas_algorithms]
- :jira:`DM-27100`:  Integrate panDA dag generation into ctrl_bps [ctrl_bps]
- :jira:`DM-27118`:  Switch to spawn method in ctrl_mpexec to fix ci_hsc_gen3 failing on macOS jenkins [ctrl_mpexec, daf_butler]
- :jira:`DM-27147`:  Add per-camera umbrella collections and levels of indirection for versioned root datasets [ap_verify, ctrl_bps, ctrl_mpexec, daf_butler, obs_base, obs_subaru, pipe_tasks, skymap]
- :jira:`DM-27152`:  Allow instrument-specific variants in dataIds [daf_butler]
- :jira:`DM-27153`:  Defaulting the instrument in registry [ctrl_mpexec, daf_butler]
- :jira:`DM-27154`:  Usability improvement suggestions for butler collection commands [daf_butler]
- :jira:`DM-27164`:  Add task to compute and persist VisitSummary tables [daf_butler, obs_base, obs_subaru, pipe_tasks]
- :jira:`DM-27168`:  Phase out use of FilterProperty [obs_base, obs_cfht, obs_decam, obs_subaru, pipe_tasks]
- :jira:`DM-27169`:  Use FilterLabel in Exposure/ExposureInfo [afw, daf_butler, obs_base]
- :jira:`DM-27170`:  Deprecate and phase out afw::image::Filter [afw, ap_association, cp_pipe, ip_diffim, ip_isr, jointcal, meas_astrom, obs_base, obs_cfht, obs_decam, obs_lsst, obs_subaru, obs_test, pipe_tasks]
- :jira:`DM-27173`:  Add doc field to obs.base.FilterDefinition [obs_base, obs_decam, obs_subaru]
- :jira:`DM-27174`:  Create InstrumentLabel class for ExposureInfo [afw]
- :jira:`DM-27175`:  Add InstrumentLabel to new exposures [obs_base]
- :jira:`DM-27178`:  Standardize aliases on Gen 2 Exposure get [obs_base]
- :jira:`DM-27255`:  Merge generic and HSC-specific config overrides in obs_subaru [fgcmcal, obs_subaru]
- :jira:`DM-27301`:  Undefined behavior for getArray in ImageBase when _gilView has no height [afw, ip_diffim]
- :jira:`DM-27325`:  Can't rerun ap_verify on same repository in Gen 3 (II) [ap_verify, verify]
- :jira:`DM-27344`:  Add butler query-dimension-records subcommand [daf_butler]
- :jira:`DM-27356`:  Implement a minimal cutout task [daf_butler, pipe_tasks]
- :jira:`DM-27359`:  Make python-derived Storable classes persistable [afw, meas_algorithms]
- :jira:`DM-27364`:  ingestIndexManager does not set up global multiprocessing value before forking, breaking multiprocessing after python 3.8. on mac [meas_algorithms]
- :jira:`DM-27377`:  fgcm multiprocessing strategy with shared memory manager doesn't work well with python 3.8 [fgcm]
- :jira:`DM-27388`:  Implement metric system for fakes in AP [ap_pipe]
- :jira:`DM-27406`:  Leave parent footprints untouched [meas_extensions_scarlet]
- :jira:`DM-27422`:  @option_section() doesn't seem to work well with Sphinx [daf_butler]
- :jira:`DM-27458`:  FULLCOVARIANCE in PTC task is rejecting more points than it should for some BOT data detectors  [cp_pipe]
- :jira:`DM-27462`:  Add --config-file option alias to CmdLineTask [pipe_base]
- :jira:`DM-27473`:  butler Config merge doesn't with dict despite docstring saying it does. [daf_butler]
- :jira:`DM-27476`:  Add support for metadata sidecar files for ingest [obs_base]
- :jira:`DM-27477`:  Define JSON serialization format for ObservationInfo [astro_metadata_translator]
- :jira:`DM-27478`:  Allow absolute URIs to be stored in datastore [daf_butler, obs_base]
- :jira:`DM-27500`:  add a comment in butler & pipetask subcommand about more options in butler --help [ctrl_mpexec, daf_butler, obs_base, pipe_tasks]
- :jira:`DM-27501`:  Implement generic stamp collection class [daf_butler, meas_algorithms]
- :jira:`DM-27502`:  Numpydoc conversion of meas_algorithms through makeCoaddApCorrMap.py [meas_algorithms]
- :jira:`DM-27519`:  --show history doesn't report complete results in pipetask [ctrl_mpexec, pex_config]
- :jira:`DM-27523`:  allow passed-in CLI key-value options to extend default values [daf_butler]
- :jira:`DM-27541`:  Update SSObject alert schemas [alert_packet]
- :jira:`DM-27570`:  bps report id not showing running jobs in Total line  [ctrl_bps]
- :jira:`DM-27575`:  requestMemory not ending up in submit files. [ctrl_bps]
- :jira:`DM-27576`:  wave front sensors don't read correctly with Gen3 [obs_lsst]
- :jira:`DM-27598`:  Many images have few or no good pixels when running ptc.py [cp_pipe]
- :jira:`DM-27599`:  Generic gen2to3 data ID translator rules need to cover both visit and exposureKey [obs_base]
- :jira:`DM-27613`:  Apply FGCM and jointcal in Gen3 MakeWarpTask [fgcmcal, obs_subaru, pipe_tasks]
- :jira:`DM-27626`:  Make version.py generated by sconsUtils black compliant [sconsUtils]
- :jira:`DM-27630`:  Use CI dataset in ap_verify examples [ap_verify]
- :jira:`DM-27631`:  use multiprocessing context with fork for ctrl_mpexec for python 3.8 support on mac [ctrl_mpexec]
- :jira:`DM-27633`:  Add a parameters section to Pipelines [pipe_base]
- :jira:`DM-27638`:  doImport error message hides actual error [utils]
- :jira:`DM-27641`:  Fix parameters in Pipelines [pipe_base]
- :jira:`DM-27648`:  Make bps' CLI --log-level behavior consistent [ctrl_bps]
- :jira:`DM-27652`:  Provide source centroiding utility for T&S in pipe_tasks [afwdata, pipe_tasks]
- :jira:`DM-27653`:  Fix "too many values to unpack" error in `pipeline run` [ctrl_mpexec, pipelines_check]
- :jira:`DM-27654`:  Let Doxygen document private virtual methods [base]
- :jira:`DM-27657`:  Make bbox check for fakes more robust. [ap_pipe, pipe_tasks]
- :jira:`DM-27666`:  Command line has full path for QuantumGraph filename [ctrl_bps]
- :jira:`DM-27667`:  Pass which nodes to execute to pipetask run [ctrl_mpexec]
- :jira:`DM-27670`:  Update obs_lsst/imsim filterMap config per change on DM-26138 [obs_lsst]
- :jira:`DM-27682`:  Allow pipetask to read quantum graph files from URIs [ctrl_mpexec, pipe_base]
- :jira:`DM-27684`:  Add butler register-skymap subcommand [pipe_tasks]
- :jira:`DM-27685`:  Add butler make gen3 dcr subfilters subcommand [daf_butler, pipe_tasks]
- :jira:`DM-27689`:  Fix and extend mypy configuration for daf_butler [daf_butler]
- :jira:`DM-27694`:  Expand environment variables in schemeless ButlerURIs [daf_butler]
- :jira:`DM-27696`:  Fix Boost deprecation warning in afw [afw, sconsUtils]
- :jira:`DM-27722`:  Update scripts to use gen3 butler [meas_extensions_scarlet, pipe_tasks]
- :jira:`DM-27760`:  butler ingest-raws -c option is broken [obs_base]
- :jira:`DM-27766`:  Update usage of pyerfa in stack code [obs_base]
- :jira:`DM-27767`:  Have specialist file template for raw data in gen3 datastore [daf_butler]
- :jira:`DM-27783`:  Add improvements to getInitialGoodPoints in ptc.py [cp_pipe]
- :jira:`DM-27784`:  Add ability to load select nodes from a QuantumGraph [ctrl_mpexec, pipe_base]
- :jira:`DM-27810`:  Skip converting flux to amplitude in computeFixedMomentsFlux [meas_base]
- :jira:`DM-27831`:  missing () in log statement in  obs_lsst assembly.py  [obs_lsst]
- :jira:`DM-27832`:  Fatal errors from astro_metadata_translator in DECam [astro_metadata_translator]
- :jira:`DM-27833`:  Enable gen3 inter-chip crosstalk for DECam [ip_isr, obs_decam]
- :jira:`DM-27835`:  pipetask run should always print stack trace and exception details [ctrl_bps, ctrl_mpexec, daf_butler, obs_base, pipe_tasks]
- :jira:`DM-27840`:  Fix confusing message from pipetask run [ctrl_mpexec]
- :jira:`DM-27854`:  CpFlatNormalizationTask improperly indexes detectors [cp_pipe]
- :jira:`DM-27857`:  Update ap_verify dataset conversion scripts [ap_verify, ap_verify_testdata]
- :jira:`DM-27863`:  Allow controller = 'H' for exposure_id calculation [obs_lsst]
- :jira:`DM-27864`:  Fix pipetask timeout argument type. [ctrl_mpexec]
- :jira:`DM-27868`:  Stop erroneously adjusting the raw WCS in assembleCcdTask [ip_isr]
- :jira:`DM-27869`:  Create jointcal pipetask [jointcal]
- :jira:`DM-27883`:  obs_lsst has a race condition between tests and curated calibration ingestion [obs_lsst]
- :jira:`DM-27884`:  Improve ButlerHttpURI requests behavior [daf_butler]
- :jira:`DM-27888`:  Filename passed to QuantumGraphs' save() should have extension .qgraph [ctrl_bps]
- :jira:`DM-27894`:  Merge upstream fgcm changes back to fork [fgcm]
- :jira:`DM-27896`:  Add summary statistics component to Exposure [afw, daf_butler, obs_base, pipe_tasks]
- :jira:`DM-27919`:  DECam "physical_filter" is too long and has spaces [daf_butler]
- :jira:`DM-27922`:  Create initial gen3 calibs for DC2 [obs_lsst]
- :jira:`DM-27929`:  Skip sky objects during deblending [meas_extensions_scarlet, pipe_tasks]
- :jira:`DM-27941`:  Update the import system for Pipelines [ap_pipe, ap_verify, obs_subaru, pipe_base, pipe_tasks]
- :jira:`DM-27946`:  Test failure in pipe_tasks test_calexpCutout.py [pipe_tasks]
- :jira:`DM-27971`:  query-dimension-records throws an exception on invalid dimensions [daf_butler]
- :jira:`DM-27984`:  psfex does not build on macOS with newer compilers [psfex]
- :jira:`DM-27985`:  Fix timespan edge cases, make temporal queries work again, and add bindparam support [daf_butler, pipe_base]
- :jira:`DM-28004`:  ExposureInfo may persist dummy FilterLabels [afw, obs_base]
- :jira:`DM-28017`:  Investigate issues with DC2 deblending [scarlet]
- :jira:`DM-28036`:  Change Pipelines to and save to a URI [ctrl_mpexec, pipe_base, pipelines_check]
- :jira:`DM-28040`:  Persistence of the Stamps object is broken [meas_algorithms]
- :jira:`DM-28042`:  Allow test temporary directory root to be set by envvar [daf_butler]
- :jira:`DM-28044`:  pytest-xdist renamed an option to max-worker-restart [sconsUtils]
- :jira:`DM-28046`:  Update PhosimEimgParseTask to use LsstCam [obs_lsst]
- :jira:`DM-28056`:  Fix fgcmCalibrateTractTable DefaultName Error [fgcmcal]
- :jira:`DM-28087`:  obs_lsst accounts for detectors twice in IDs [obs_lsst]
- :jira:`DM-28088`:  Change fgcmcal to use FilterLabel [fgcmcal, obs_subaru]
- :jira:`DM-28092`:  Document that DiaPipeTask can only handle specific bands [ap_association, ap_pipe]
- :jira:`DM-28093`:  Change isrTask (and relevant configs) to use physicalLabel [ip_isr, obs_cfht, obs_decam, obs_subaru]
- :jira:`DM-28095`:  A missing storage class causes all dataset queries to fail [daf_butler]
- :jira:`DM-28101`:  Improve error messages and fail earlier in some pipetask error cases [ctrl_mpexec, pipe_base]
- :jira:`DM-28102`:  Correct obs_base typo in processCcdWithFakes [obs_base]
- :jira:`DM-28103`:  safeClip not respecting Subaru configs [pipe_tasks]
- :jira:`DM-28107`:  Convert/ingest PS1 and Gaia refcats into gen3 repo for DECam use [ap_pipe]
- :jira:`DM-28109`:  Test failure in obs_base test_cameraMapper.Mapper2TestCase [obs_base]
- :jira:`DM-28158`:  2021-12-31 is not far enough in the future to trigger an Astropy warning [obs_lsst]
- :jira:`DM-28184`:  gen3 crosstalk generation does not set DET_NAME correctly. [cp_pipe]
- :jira:`DM-28208`:  Add python access to readComponent() and associated Storable tests. [afw]
- :jira:`DM-28214`:  Adapt pipe_analysis scripts to allow loading of Gaia reference catalogs for astrometric matching [obs_base, obs_subaru]
- :jira:`DM-28220`:  Update docstring for ``import_`` [daf_butler]
- :jira:`DM-28233`:  Jointcal refcat position errors have incorrect units [jointcal]
- :jira:`DM-28236`:  get('calexp_filterLabel') does not return a full label for pre-FilterLabel data [obs_base]
- :jira:`DM-28257`:  Allow Butler to take a PosixPath object as config  [daf_butler]
- :jira:`DM-28258`:  Epoch is not getting passed consistently among reference catalog loading functions [meas_algorithms, meas_astrom]
- :jira:`DM-28283`:  Add fakes_calexp and fakes_src dataset types to imsimMapper [obs_lsst]
- :jira:`DM-28314`:  Create JSON representations of common gen3 python types [daf_butler]
- :jira:`DM-28323`:  Make meas_extensions_scarlet the default deblender [pipe_tasks]
- :jira:`DM-28351`:  Add faro to lsst_distrib [lsst_distrib]
- :jira:`DM-28355`:  Allow ingest-raws to fail immediately on first error [obs_base]
- :jira:`DM-28368`:  Fix afw readComponent to allow reading of all components [afw]
- :jira:`DM-28384`:  Numpydoc conversion of meas_algorithms through measureApCorr.py [meas_algorithms]
- :jira:`DM-28386`:  Package versions change depending on Python imports [base]
- :jira:`DM-28387`:  verify's dispatchVerify.py only works in Jenkins if gitpython is absent [verify]
- :jira:`DM-28389`:  Create a gen3 task to collate tract-level parquet tables for QA analyses [obs_subaru]
- :jira:`DM-28392`:  Fix string formatting typo [obs_base]
- :jira:`DM-28418`:  pipetask hangs with very large numbers of quanta [ctrl_mpexec]
- :jira:`DM-28426`:  daf_persistence/test_safeFileIO.py creates too many processes on macOS [daf_persistence]
- :jira:`DM-28429`:  Convert MultiProFitTask into gen3 PipelineTask [pipe_tasks]
- :jira:`DM-28439`:  Converting HiTS2015 repo fails on bad filter [obs_decam]
- :jira:`DM-28441`:  PyYAML FullLoader as used by daf_persistence no longer works [daf_persistence, obs_base]
- :jira:`DM-28442`:  Fix variance plane calculation scaling in non-normalized matching kernel case [ip_diffim, pipe_tasks]
- :jira:`DM-28457`:  In cpCombine.py, the config option "combine" should be a string, not the integer stats value [cp_pipe]
- :jira:`DM-28459`:  Bands seem wrong for LATISS in butler [obs_base, obs_lsst]
- :jira:`DM-28460`:  HSC ENG-R1 filter seems to have wrong band [astro_metadata_translator, obs_subaru]
- :jira:`DM-28474`:  Update scarlet to latest version [meas_extensions_scarlet, scarlet]
- :jira:`DM-28480`:  Flake8/pyflakes needs to update to work with Python 3.8 [afw, cp_pipe, ctrl_bps, ctrl_mpexec, daf_persistence, ip_diffim, jointcal, log, meas_algorithms, meas_base, meas_deblender, meas_extensions_photometryKron, meas_extensions_psfex, obs_base, obs_subaru, pipe_base, pipe_tasks, sconsUtils, shapelet, utils, validate_drp, verify]
- :jira:`DM-28491`:  Fix github actions on daf_butler [daf_butler]
- :jira:`DM-28497`:  Modernize pybind11 wrappers for afw.math [afw, ip_diffim]
- :jira:`DM-28498`:  psFlux is biased in difference images. [pipe_tasks]
- :jira:`DM-28506`:  Reading coadds fails on VisitInfo [afw]
- :jira:`DM-28523`:  Add fake source injection capability for sources falling outside the frame [pipe_tasks]
- :jira:`DM-28527`:  Bad results (and unexpectd slowness) from query-datasets [daf_butler]
- :jira:`DM-28531`:  imsim data needs different ptc pairing. [cp_pipe]
- :jira:`DM-28542`:  Implement RFC-750 [meas_extensions_scarlet, pipe_tasks]
- :jira:`DM-28552`:  Make warping optional in ProcessBrightStarsTask [pipe_tasks]
- :jira:`DM-28553`:  Update the gain, readNoise, and saturation levels based on EOTest [obs_lsst]
- :jira:`DM-28555`:  Add verbosity to ApPipe and DiaPipe DB errors [ap_association, ap_pipe]
- :jira:`DM-28570`:  Extend calexp cutout task to take both width and height [pipe_tasks]
- :jira:`DM-28577`:  Surpress Filter warnings in FilterDefinitions [obs_base, obs_subaru]
- :jira:`DM-28583`:  Update fitsExposure formatter to fill in filterLabel from dataId [afw, daf_butler, obs_base, obs_lsst]
- :jira:`DM-28584`:  Scarlet use of np.float breaks on numpy 1.20.0 [meas_extensions_scarlet, scarlet]
- :jira:`DM-28587`:  Silence scarlet warning messages [meas_extensions_scarlet]
- :jira:`DM-28595`:  Identify central detection footprint and change flags accordingly in ProcessBrightStarsTask [pipe_tasks]
- :jira:`DM-28597`:  Fix colorterm/photoCal filterLabel confusion [fgcmcal, jointcal, obs_cfht, obs_subaru, pipe_tasks]
- :jira:`DM-28598`:  Add daf_butler FAQ/gotchas docs [ctrl_mpexec, daf_butler, pipe_base]
- :jira:`DM-28600`:  Add option to apply sky correction to ProcessBrightStarsTask [pipe_tasks]
- :jira:`DM-28609`:  Fix Zero Size Bounding Box Crash in InsertFakes.py [pipe_tasks]
- :jira:`DM-28612`:  Enable on-sky translations for LSSTCam [astro_metadata_translator, obs_lsst]
- :jira:`DM-28623`:  pybind11-wrapped objects do not correctly implement python hash [daf_persistence]
- :jira:`DM-28625`:  Remove doxygen build from obs_base [obs_base]
- :jira:`DM-28642`:  Fix computeSummaryStatsTask documentation files [pipe_tasks]
- :jira:`DM-28648`:  Change datastore to support minimal registry for pipeline execution [daf_butler]
- :jira:`DM-28658`:  Modernize pybind11 wrappers for afw.display  afw.cameraGeom  afw.coord [afw, display_ds9, display_firefly, ip_diffim]
- :jira:`DM-28659`:  daf_persistence/test_safeFileIO.py creates too many processes on most machines [daf_persistence]
- :jira:`DM-28665`:  Remove new-dimensions limitations in queries [daf_butler]
- :jira:`DM-28674`:  Protect hash in ButlerURI [daf_butler]
- :jira:`DM-28677`:  Avoid numerical warnings, update docstrings, add option to calculate only the factors in ScaleVarianceTask [pipe_tasks]
- :jira:`DM-28693`:  Additional Filter deprecation warnings in lsstCamMapper [obs_lsst]
- :jira:`DM-28701`:  HSC RC2 processing fails due to improper model [pipe_drivers]
- :jira:`DM-28707`:  display_firefly can't use conda firefly_client [display_firefly]
- :jira:`DM-28717`:  Allow for Stamps formatter to handle bbox [afw, daf_butler, meas_algorithms, obs_base]
- :jira:`DM-28727`:  Modernize pybind11 wrappers for afw.image [afw, fgcmcal]
- :jira:`DM-28730`:  Look into scarlet memory issues [meas_extensions_scarlet]
- :jira:`DM-28731`:  Add meas_extensions_piff to lsst_apps [lsst_apps]
- :jira:`DM-28742`:  Set solid plate decam filter to band opaque [obs_decam]
- :jira:`DM-28744`:  Fix band assignments in obs_cfht [obs_cfht]
- :jira:`DM-28751`:  Make a PipelineTask that can run ngmix tasks [pipe_tasks]
- :jira:`DM-28755`:  Update fgcmcal to make use of visitSummary tables [fgcm, fgcmcal]
- :jira:`DM-28756`:  Create VisitSummary tables for testdata_jointcal [fgcmcal, pipe_tasks, testdata_jointcal]
- :jira:`DM-28768`:  Get alert_packet to work with fastavro >= 0.24 [alert_packet]
- :jira:`DM-28783`:  RASTART/END headers are incorrect for LATISS images [obs_lsst]
- :jira:`DM-28800`:  kht sometimes fails to build properly because missing python executable [kht]
- :jira:`DM-28844`:  Refactor astro_metadata_translator command line tooling [astro_metadata_translator]
- :jira:`DM-28857`:  sort collections before pruning in `butler prune-collection` [daf_butler]
- :jira:`DM-28858`:  Compare the data products of the gen2 vs. gen3 ci_hsc's  up to Single Frame Processing  [meas_algorithms, meas_base]
- :jira:`DM-28919`:  Update gain and noise numbers for comCam and latiss (and possible LSSTCam) [obs_lsst]
- :jira:`DM-28922`:  pipe.tasks.Functor doesn't work with deferred dataref if not multi-level [pipe_tasks]
- :jira:`DM-28927`:  Dimension packing/unpacking broken for DECam [obs_decam]
- :jira:`DM-28929`:  bps incorrectly assumes htcondor attribute is a string [ctrl_bps]
- :jira:`DM-28936`:  Try to get calibration source selection consistent between gen2 and gen3 middleware [meas_algorithms, pipe_tasks]
- :jira:`DM-28940`:  Create functor for pix^2->arcsec^2 unit conversion [pipe_tasks]
- :jira:`DM-28942`:  Create dipMeanFlux/dipFluxDiff functor. [pipe_tasks]
- :jira:`DM-28947`:  Fix failing ci_hsc test [meas_extensions_scarlet]
- :jira:`DM-28953`:  Implement a visit-level BestSeeing selector in Gen3 [pipe_tasks]
- :jira:`DM-28958`:  Fix breakage due to move of the job reporter class from faro to verify [verify]
- :jira:`DM-28960`:  Add CHAINED collection creation to BPS [ctrl_bps]
- :jira:`DM-28962`:  Update pipe_analysis scripts for "filter" to "band" name change [obs_subaru]
- :jira:`DM-28964`:  Add incremental progress reporting to butler and some middleware tools [daf_butler, obs_base]
- :jira:`DM-28978`:  Fix Dataframe StorageClass definition [daf_butler]
- :jira:`DM-28985`:  Update Gen2 calibration policy formats in obs_subaru [obs_subaru]
- :jira:`DM-29011`:  Add walk support to ButlerURI [daf_butler]
- :jira:`DM-29017`:  Update VisitSummary tables to use detector_id as catalog id [fgcmcal, jointcal, pipe_tasks, testdata_jointcal]
- :jira:`DM-29019`:  Make obs_lsst data ID packing consistent [obs_lsst]
- :jira:`DM-29023`:  Remove documentation about ForcedPhotImage [meas_base]
- :jira:`DM-29041`:  Support repository names as ap_verify --dataset argument and deprecate old names [ap_verify, ap_verify_testdata]
- :jira:`DM-29049`:  jointcal gen3 fixes for running RC2 [jointcal]
- :jira:`DM-29055`:  Unbitrot Gen3 SkyCorrectionTask [obs_subaru, pipe_drivers]
- :jira:`DM-29056`:  Create S/N functor [pipe_tasks]
- :jira:`DM-29065`:  Ensure input lists are ordered the same before making warps  [pipe_tasks]
- :jira:`DM-29071`:  Provide a way for RawIngestTask to report successes and failures programmatically [obs_base]
- :jira:`DM-29073`:  Make ButlerURI immutable [daf_butler]
- :jira:`DM-29106`:  Allow butler to "forget" datasets without deleting them [daf_butler]
- :jira:`DM-29117`:  dafBase.PropertyList[] cannot change type of value [daf_base]
- :jira:`DM-29121`:  ApPipeTask's --reuse-outputs-from does not work with external preprocessing [ap_pipe]
- :jira:`DM-29139`:  Failure collecting test files in afw [sconsUtils]
- :jira:`DM-29166`:  Make Instrument-generated collection names more flexible [obs_base, obs_subaru]
- :jira:`DM-29169`:  Ignore more directories in test collection [sconsUtils]
- :jira:`DM-29187`:  LATISS UTC/TAI problems were fixed on 2021-02-12 [obs_lsst]
- :jira:`DM-29203`:  Add option to flatten CHAINED collections when defining them [ctrl_mpexec, daf_butler, obs_base]
- :jira:`DM-29218`:  Prevent double header fixup in astro_metadata_translator [astro_metadata_translator]
- :jira:`DM-29225`:  Add instrument to ProcessBrightStarsTask's quantum dimensions [pipe_tasks]
- :jira:`DM-29252`:  Sqlalchemy 1.4 breaks Butler registry [daf_butler]
- :jira:`DM-29264`:  Update phosim_syseng4 for ComCam [obs_lsst]
- :jira:`DM-29266`:  Remove need for special raw ingest task for DECam/CFHT [astro_metadata_translator, obs_base, obs_cfht, obs_decam, obs_lsst]
- :jira:`DM-29271`:  PTC task: Refactoring/simplification of code ported from Pierre Astier's repository.  [cp_pipe, ip_isr]
- :jira:`DM-29275`:  Fix problem in obs_base from fix_header provenance [obs_base, obs_decam, obs_lsst]
- :jira:`DM-29280`:  Look into source of NaN/Infs values in calexp images  [ip_isr]
- :jira:`DM-29299`:  fgcm is overly aggressive when validating physicalFilterMap [fgcmcal]
- :jira:`DM-29303`:  Add missing astshim dependency declaration [afw]
- :jira:`DM-29313`:  FilterLabel is not properly filled in for CFHT raws [obs_base]
- :jira:`DM-29324`:  Clean up display_firefly for proper use of firefly_client via Conda [display_firefly]
- :jira:`DM-29336`:  Templates are identical for icExp and icExpBackground in obs_lsst [obs_lsst]
- :jira:`DM-29337`:  Google secrets as mounted files instead of env vars in Cloud Deployment  [ctrl_bps]
- :jira:`DM-29345`:  Add method to get QuantumNodes by TaskDef [pipe_base]
- :jira:`DM-29351`:  DM-28658 broke cameraGeom documentation build [afw]
- :jira:`DM-29354`:  Remove deprecated gen3 data stores (fixing documentation warnings) [ap_verify_testdata, daf_butler, pipe_base]
- :jira:`DM-29383`:  StrayLight correction fails on object stores [daf_butler]
- :jira:`DM-29388`:  ap_verify failed on d_2021_03_24 [pipe_base]
- :jira:`DM-29397`:  Rename exposureScaling parameter to avoid confusion. [cp_pipe, obs_lsst]
- :jira:`DM-29398`:  Modernize export code in pipelines_check [pipelines_check]
- :jira:`DM-29407`:  visitSummary files should not persist the detector [jointcal, pipe_tasks, testdata_jointcal]
- :jira:`DM-29409`:  Fix butler export with absolute URIs [daf_butler]
- :jira:`DM-29412`:  Update StampsBase so that it can serve as StorageClass for subclasses [daf_butler, meas_algorithms]
- :jira:`DM-29414`:  Misleading error message when the file doesn't exist in the s3 datastore  [daf_butler]
- :jira:`DM-29424`:  Enable boresight calculation for comCam [obs_lsst]
- :jira:`DM-29440`:  Resolving file system root is fragile [daf_butler]
- :jira:`DM-29446`:  DC2 singleFrameDriver Failure: FilterLabel(physical="z_sim_1.4") has no band. [obs_lsst]
- :jira:`DM-29497`:  Add gen2 deprecation message [daf_persistence]
- :jira:`DM-29509`:  New version of deprecated python package requires version [obs_base, verify]
- :jira:`DM-29907`:  Fix meas_extensions_scarlet sorting issue [pipe_tasks]
